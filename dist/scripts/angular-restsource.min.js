!function(){"use strict";angular.module("angular-restsource",[]).factory("Restsource",["$http","$q",function(a,b){var c=function(d,e){function f(a){return angular.extend({withCredentials:!0},a)}function g(a){var c=function(a){return a.data.error||!a.data.body?b.reject(a):a.data.body},d=h.onError||function(a){return b.reject(a)},e=a.then(c,d);return e.success=function(b){return a.then(function(a){b(a.data.body,a.status,a.headers,a.config)}),e},e.error=function(b){return a.then(null,function(a){b(a.data.error,a.status,a.headers,a.config)}),e},e}var h=angular.extend({idField:"id",onError:null,onSuccess:null},e),i=this;Object.defineProperty(this,"rootUrl",{get:function(){return d}}),this.create=function(b,c){return g(a.put(d,b,f(c)))},this.read=function(b,c){var e=[d];return b&&e.push(b),g(a.get(e.join("/"),f(c)))},this.update=function(b,c){return g(a.post(d,b,f(c)))},this.save=function(a,b){return a[h.idField]?i.update(a,f(b)):i.create(a,f(b))},this.list=function(b,c,e){return e=angular.extend({params:{page:b,perPage:c}},e),g(a.get(d,f(e)))},this.delete=function(b,c){var e=[d];return b&&e.push(b),g(a.delete(e.join("/"),f(c)))},this.clone=function(a){return new c(d,angular.extend(h,a))}};return c.create=function(a){return new c(a)},c}])}();